<!DOCTYPE html>
<html lang="en">
  <head>
    <title>New Post</title>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Anonymous+Pro">
    <link href="https://fonts.googleapis.com/css2?family=Bona+Nova+SC:wght@400;700&display=swap" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='css/assets/favicon_test2.png') }}" type="image/x-icon">
    <link rel="shortcut icon" href="{{ url_for('static', filename='css/assets/favicon_test2.png') }}" type="image/x-icon">
  </head>
  <body>
    <div id="overlay">
      <div id="wrapper">
        <div id="hero">
          <img src="{{ url_for('static', filename='css/assets/hero2.png') }}" id="slogan" alt="Plundr Logo" height="36" width="200">
        </div>
        <div id="top"></div>

        <nav>
          <ul>
            <li><a href="{{ url_for('login.index') }}" class="icon navigate">Home</a></li>
          </ul>
          <div class="divider"></div>
          <footer>Copyright &copy; 2025 stay@homewives</footer>
        </nav>

        <main class="content">
          <section class="compose">
            <div class="card">
              <header class="topics-head"><h2>Write a New Post</h2></header>

              {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                  <div class="flash-wrap">
                    {% for category, message in messages %}
                      <div class="flash flash-{{ category }}">{{ message }}</div>
                    {% endfor %}
                  </div>
                {% endif %}
              {% endwith %}
              <form method="post" action="{{ url_for('posts.post') }}" enctype="multipart/form-data">
                <div class="form-grid">
                  <label for="title">Title</label>
                  <input id="title" name="title" type="text" class="input" placeholder="Optional">

                  <label for="body">Post</label>
                  <textarea id="body" name="post" class="textarea" rows="10" required placeholder="What's on your mind?"></textarea>
                  <!-- Custom File Upload -->
                  <label>Add Image</label>
                  <div class="file-upload-wrapper">
                    <label for="imageUpload" class="file-upload-label">
                      Choose Image
                    </label>
                    <input type="file" id="imageUpload" name="image" accept="image/jpeg, image/png, image/webp" class="file-upload-input">
                    <div id="fileNameDisplay" class="file-name-display">
                    </div>
                </div>

                <div class="actions">
                  <a class="btn ghost" href="{{ url_for('login.index') }}">Cancel</a>
                  <button class="btn" type="submit">Publish</button>
                </div>
              </form>
            </div>
          </section>
        </main>
      </div>
    </div>
    <script>
    document.getElementById('imageUpload').addEventListener('change', function(e) {
      const fileNameDisplay = document.getElementById('fileNameDisplay');
      if (this.files.length > 0) {
        fileNameDisplay.textContent = 'Selected: ' + this.files[0].name;
      } else {
        fileNameDisplay.textContent = '';
      }
    });
    </script>
</body>
  </body>
</html>

